[gd_scene load_steps=17 format=3 uid="uid://cnmfo6p65khyq"]

[ext_resource type="Script" path="res://TavernScene.gd" id="1_5th13"]
[ext_resource type="Script" path="res://Player.gd" id="2_mxh0d"]
[ext_resource type="TileSet" uid="uid://cowhxil65yet6" path="res://TavernTilemap.tres" id="5_ajn2r"]
[ext_resource type="Script" path="res://FluidInventory.gd" id="5_ausaj"]
[ext_resource type="Texture2D" uid="uid://brk2a3h2ia6la" path="res://Guy.png" id="6_dg785"]
[ext_resource type="Script" path="res://ItemSpawner.gd" id="7_8m7wl"]
[ext_resource type="PackedScene" uid="uid://d0jxeghfeitvh" path="res://karot.tscn" id="8_1gpcy"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ec2i2"]
size = Vector2(22.5, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_h56vk"]
atlas = ExtResource("6_dg785")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_lwsea"]
atlas = ExtResource("6_dg785")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_8k04r"]
atlas = ExtResource("6_dg785")
region = Rect2(0, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_oqkfq"]
atlas = ExtResource("6_dg785")
region = Rect2(32, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_xm3qq"]
atlas = ExtResource("6_dg785")
region = Rect2(64, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ksqr6"]
atlas = ExtResource("6_dg785")
region = Rect2(0, 64, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_fv0lg"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_h56vk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lwsea")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8k04r")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_oqkfq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xm3qq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ksqr6")
}],
"loop": true,
"name": &"new_animation",
"speed": 10.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_fulfv"]
radius = 23.0

[node name="TavernScene" type="Node2D"]
script = ExtResource("1_5th13")

[node name="FluidInventory" type="Node" parent="."]
script = ExtResource("5_ausaj")

[node name="Environment" type="Node2D" parent="."]

[node name="TileMap" type="TileMap" parent="Environment"]
tile_set = ExtResource("5_ajn2r")
format = 2
layer_0/name = "Floor"
layer_0/navigation_enabled = false
layer_0/tile_data = PackedInt32Array(65537, 524290, 1, 131074, 589826, 2, 131075, 589826, 2, 196611, 589826, 2, 196612, 589826, 2, 262149, 589826, 2, 327686, 589826, 2, 393223, 589826, 2, 131073, 524290, 1, 196609, 524290, 1, 262145, 524290, 1, 327681, 524290, 1, 393217, 524290, 1, 458753, 524290, 1, 524289, 524290, 1, 65538, 589826, 2, 196610, 589826, 2, 262146, 589826, 2, 327682, 589826, 2, 393218, 589826, 2, 458754, 589826, 2, 524290, 589826, 2, 65539, 589826, 2, 262147, 589826, 2, 327683, 589826, 2, 393219, 589826, 2, 458755, 589826, 2, 524291, 589826, 2, 65540, 589826, 2, 131076, 589826, 2, 262148, 589826, 2, 327684, 589826, 2, 393220, 589826, 2, 458756, 589826, 2, 524292, 589826, 2, 65541, 589826, 2, 131077, 589826, 2, 196613, 589826, 2, 327685, 589826, 2, 393221, 589826, 2, 458757, 589826, 2, 524293, 589826, 2, 65542, 589826, 2, 131078, 589826, 2, 196614, 589826, 2, 262150, 589826, 2, 393222, 589826, 2, 458758, 589826, 2, 524294, 589826, 2, 65543, 589826, 2, 131079, 589826, 2, 196615, 589826, 2, 262151, 589826, 2, 327687, 589826, 2, 458759, 589826, 2, 524295, 589826, 2, 65544, 589826, 2, 131080, 589826, 2, 196616, 589826, 2, 262152, 589826, 2, 327688, 589826, 2, 393224, 589826, 2, 458760, 589826, 2, 524296, 589826, 2, 65545, 589826, 2, 131081, 589826, 2, 196617, 589826, 2, 262153, 589826, 2, 327689, 589826, 2, 393225, 589826, 2, 458761, 589826, 2, 524297, 589826, 2, 1, 524290, 0, 2, 655362, 0, 3, 655362, 0, 4, 655362, 0, 5, 655362, 0, 6, 655362, 0, 7, 655362, 0, 8, 655362, 0, 9, 655362, 0, 589826, 589826, 2, 655362, 589826, 2, 720898, 589826, 2, 786434, 589826, 2, 851970, 589826, 2, 917506, 589826, 2, 983042, 589826, 2, 1048578, 589826, 2, 589827, 589826, 2, 655363, 589826, 2, 720899, 589826, 2, 786435, 589826, 2, 851971, 589826, 2, 917507, 589826, 2, 983043, 589826, 2, 1048579, 589826, 2, 589828, 589826, 2, 655364, 589826, 2, 720900, 589826, 2, 786436, 589826, 2, 851972, 589826, 2, 917508, 589826, 2, 983044, 589826, 2, 1048580, 589826, 2, 589829, 589826, 2, 655365, 589826, 2, 720901, 589826, 2, 786437, 589826, 2, 851973, 589826, 2, 917509, 589826, 2, 983045, 589826, 2, 1048581, 589826, 2, 589830, 589826, 2, 655366, 589826, 2, 720902, 589826, 2, 786438, 589826, 2, 851974, 589826, 2, 917510, 589826, 2, 983046, 589826, 2, 1048582, 589826, 2, 589831, 589826, 2, 655367, 589826, 2, 720903, 589826, 2, 786439, 589826, 2, 851975, 589826, 2, 917511, 589826, 2, 983047, 589826, 2, 1048583, 589826, 2, 589832, 589826, 2, 655368, 589826, 2, 720904, 589826, 2, 786440, 589826, 2, 851976, 589826, 2, 917512, 589826, 2, 983048, 589826, 2, 1048584, 589826, 2, 589833, 589826, 2, 655369, 589826, 2, 720905, 589826, 2, 786441, 589826, 2, 851977, 589826, 2, 917513, 589826, 2, 983049, 589826, 2, 1048585, 589826, 2, 65546, 589826, 2, 131082, 589826, 2, 196618, 589826, 2, 262154, 589826, 2, 327690, 589826, 2, 393226, 589826, 2, 458762, 589826, 2, 524298, 589826, 2, 589834, 589826, 2, 655370, 589826, 2, 720906, 589826, 2, 786442, 589826, 2, 851978, 589826, 2, 917514, 589826, 2, 983050, 589826, 2, 1048586, 589826, 2, 65547, 589826, 2, 131083, 589826, 2, 196619, 589826, 2, 262155, 589826, 2, 327691, 589826, 2, 393227, 589826, 2, 458763, 589826, 2, 524299, 589826, 2, 589835, 589826, 2, 655371, 589826, 2, 720907, 589826, 2, 786443, 589826, 2, 851979, 589826, 2, 917515, 589826, 2, 983051, 589826, 2, 1048587, 589826, 2, 65548, 589826, 2, 131084, 589826, 2, 196620, 589826, 2, 262156, 589826, 2, 327692, 589826, 2, 393228, 589826, 2, 458764, 589826, 2, 524300, 589826, 2, 589836, 589826, 2, 655372, 589826, 2, 720908, 589826, 2, 786444, 589826, 2, 851980, 589826, 2, 917516, 589826, 2, 983052, 589826, 2, 1048588, 589826, 2, 65549, 589826, 2, 131085, 589826, 2, 196621, 589826, 2, 262157, 589826, 2, 327693, 589826, 2, 393229, 589826, 2, 458765, 589826, 2, 524301, 589826, 2, 589837, 589826, 2, 655373, 589826, 2, 720909, 589826, 2, 786445, 589826, 2, 851981, 589826, 2, 917517, 589826, 2, 983053, 589826, 2, 1048589, 589826, 2, 65550, 589826, 2, 131086, 589826, 2, 196622, 589826, 2, 262158, 589826, 2, 327694, 589826, 2, 393230, 589826, 2, 458766, 589826, 2, 524302, 589826, 2, 589838, 589826, 2, 655374, 589826, 2, 720910, 589826, 2, 786446, 589826, 2, 851982, 589826, 2, 917518, 589826, 2, 983054, 589826, 2, 1048590, 589826, 2, 65551, 589826, 2, 131087, 589826, 2, 196623, 589826, 2, 262159, 589826, 2, 327695, 589826, 2, 393231, 589826, 2, 458767, 589826, 2, 524303, 589826, 2, 589839, 589826, 2, 655375, 589826, 2, 720911, 589826, 2, 786447, 589826, 2, 851983, 589826, 2, 917519, 589826, 2, 983055, 589826, 2, 1048591, 589826, 2, 65552, 589826, 2, 131088, 589826, 2, 196624, 589826, 2, 262160, 589826, 2, 327696, 589826, 2, 393232, 589826, 2, 458768, 589826, 2, 524304, 589826, 2, 589840, 589826, 2, 655376, 589826, 2, 720912, 589826, 2, 786448, 589826, 2, 851984, 589826, 2, 917520, 589826, 2, 983056, 589826, 2, 1048592, 589826, 2, 65553, 589826, 2, 131089, 589826, 2, 196625, 589826, 2, 262161, 589826, 2, 327697, 589826, 2, 393233, 589826, 2, 458769, 589826, 2, 524305, 589826, 2, 589841, 589826, 2, 655377, 589826, 2, 720913, 589826, 2, 786449, 589826, 2, 851985, 589826, 2, 917521, 589826, 2, 983057, 589826, 2, 1048593, 589826, 2, 65554, 589826, 2, 131090, 589826, 2, 196626, 589826, 2, 262162, 589826, 2, 327698, 589826, 2, 393234, 589826, 2, 458770, 589826, 2, 524306, 589826, 2, 589842, 589826, 2, 655378, 589826, 2, 720914, 589826, 2, 786450, 589826, 2, 851986, 589826, 2, 917522, 589826, 2, 983058, 589826, 2, 1048594, 589826, 2, 65555, 589826, 2, 131091, 589826, 2, 196627, 589826, 2, 262163, 589826, 2, 327699, 589826, 2, 393235, 589826, 2, 458771, 589826, 2, 524307, 589826, 2, 589843, 589826, 2, 655379, 589826, 2, 720915, 589826, 2, 786451, 589826, 2, 851987, 589826, 2, 917523, 589826, 2, 983059, 589826, 2, 1048595, 589826, 2, 65556, 589826, 2, 131092, 589826, 2, 196628, 589826, 2, 262164, 589826, 2, 327700, 589826, 2, 393236, 589826, 2, 458772, 589826, 2, 524308, 589826, 2, 589844, 589826, 2, 655380, 589826, 2, 720916, 589826, 2, 786452, 589826, 2, 851988, 589826, 2, 917524, 589826, 2, 983060, 589826, 2, 1048596, 589826, 2, 65557, 589826, 2, 131093, 589826, 2, 196629, 589826, 2, 262165, 589826, 2, 327701, 589826, 2, 393237, 589826, 2, 458773, 589826, 2, 524309, 589826, 2, 589845, 589826, 2, 655381, 589826, 2, 720917, 589826, 2, 786453, 589826, 2, 851989, 589826, 2, 917525, 589826, 2, 983061, 589826, 2, 1048597, 589826, 2, 65558, 589826, 2, 131094, 589826, 2, 196630, 589826, 2, 262166, 589826, 2, 327702, 589826, 2, 393238, 589826, 2, 458774, 589826, 2, 524310, 589826, 2, 589846, 589826, 2, 655382, 589826, 2, 720918, 589826, 2, 786454, 589826, 2, 851990, 589826, 2, 917526, 589826, 2, 983062, 589826, 2, 1048598, 589826, 2, 65559, 589826, 2, 131095, 589826, 2, 196631, 589826, 2, 262167, 589826, 2, 327703, 589826, 2, 393239, 589826, 2, 458775, 589826, 2, 524311, 589826, 2, 589847, 589826, 2, 655383, 589826, 2, 720919, 589826, 2, 786455, 589826, 2, 851991, 589826, 2, 917527, 589826, 2, 983063, 589826, 2, 1048599, 589826, 2, 65560, 589826, 2, 131096, 589826, 2, 196632, 589826, 2, 262168, 589826, 2, 327704, 589826, 2, 393240, 589826, 2, 458776, 589826, 2, 524312, 589826, 2, 589848, 589826, 2, 655384, 589826, 2, 720920, 589826, 2, 786456, 589826, 2, 851992, 589826, 2, 917528, 589826, 2, 983064, 589826, 2, 1048600, 589826, 2, 65561, 589826, 2, 131097, 589826, 2, 196633, 589826, 2, 262169, 589826, 2, 327705, 589826, 2, 393241, 589826, 2, 458777, 589826, 2, 524313, 589826, 2, 589849, 589826, 2, 655385, 589826, 2, 720921, 589826, 2, 786457, 589826, 2, 851993, 589826, 2, 917529, 589826, 2, 983065, 589826, 2, 1048601, 589826, 2, 65562, 589826, 2, 131098, 589826, 2, 196634, 589826, 2, 262170, 589826, 2, 327706, 589826, 2, 393242, 589826, 2, 458778, 589826, 2, 524314, 589826, 2, 589850, 589826, 2, 655386, 589826, 2, 720922, 589826, 2, 786458, 589826, 2, 851994, 589826, 2, 917530, 589826, 2, 983066, 589826, 2, 1048602, 589826, 2, 1114114, 589826, 2, 1179650, 589826, 2, 1114115, 589826, 2, 1179651, 589826, 2, 1114116, 589826, 2, 1179652, 589826, 2, 1114117, 589826, 2, 1179653, 589826, 2, 1114118, 589826, 2, 1179654, 589826, 2, 1114119, 589826, 2, 1179655, 589826, 2, 1114120, 589826, 2, 1179656, 589826, 2, 1114121, 589826, 2, 1179657, 589826, 2, 1114122, 589826, 2, 1179658, 589826, 2, 1114123, 589826, 2, 1179659, 589826, 2, 1114124, 589826, 2, 1179660, 589826, 2, 1114125, 589826, 2, 1179661, 589826, 2, 1114126, 589826, 2, 1179662, 589826, 2, 1114127, 589826, 2, 1179663, 589826, 2, 1114128, 589826, 2, 1179664, 589826, 2, 1114129, 589826, 2, 1179665, 589826, 2, 1114130, 589826, 2, 1179666, 589826, 2, 1114131, 589826, 2, 1179667, 589826, 2, 1114132, 589826, 2, 1179668, 589826, 2, 1114133, 589826, 2, 1179669, 589826, 2, 1114134, 589826, 2, 1179670, 589826, 2, 1114135, 589826, 2, 1179671, 589826, 2, 1114136, 589826, 2, 1179672, 589826, 2, 1114137, 589826, 2, 1179673, 589826, 2, 1114138, 589826, 2, 1179674, 589826, 2, 65563, 589826, 2, 131099, 589826, 2, 196635, 589826, 2, 262171, 589826, 2, 327707, 589826, 2, 393243, 589826, 2, 458779, 589826, 2, 524315, 589826, 2, 589851, 589826, 2, 655387, 589826, 2, 720923, 589826, 2, 786459, 589826, 2, 851995, 589826, 2, 917531, 589826, 2, 983067, 589826, 2, 1048603, 589826, 2, 1114139, 589826, 2, 1179675, 589826, 2, 65564, 589826, 2, 131100, 589826, 2, 196636, 589826, 2, 262172, 589826, 2, 327708, 589826, 2, 393244, 589826, 2, 458780, 589826, 2, 524316, 589826, 2, 589852, 589826, 2, 655388, 589826, 2, 720924, 589826, 2, 786460, 589826, 2, 851996, 589826, 2, 917532, 589826, 2, 983068, 589826, 2, 1048604, 589826, 2, 1114140, 589826, 2, 1179676, 589826, 2, 65565, 589826, 2, 131101, 589826, 2, 196637, 589826, 2, 262173, 589826, 2, 327709, 589826, 2, 393245, 589826, 2, 458781, 589826, 2, 524317, 589826, 2, 589853, 589826, 2, 655389, 589826, 2, 720925, 589826, 2, 786461, 589826, 2, 851997, 589826, 2, 917533, 589826, 2, 983069, 589826, 2, 1048605, 589826, 2, 1114141, 589826, 2, 1179677, 589826, 2, 10, 655362, 0, 11, 655362, 0, 12, 655362, 0, 13, 655362, 0, 14, 655362, 0, 15, 655362, 0, 16, 655362, 0, 17, 655362, 0, 18, 655362, 0, 19, 655362, 0, 20, 655362, 0, 21, 655362, 0, 22, 655362, 0, 23, 655362, 0, 24, 655362, 0, 25, 655362, 0, 26, 655362, 0, 27, 655362, 0, 28, 655362, 0, 29, 655362, 0, 30, 720898, 0, 65566, 720898, 2, 131102, 720898, 2, 196638, 720898, 2, 262174, 720898, 2, 327710, 720898, 2, 393246, 720898, 2, 458782, 720898, 2, 524318, 720898, 2, 589854, 720898, 2, 655390, 720898, 2, 720926, 720898, 2, 786462, 720898, 2, 851998, 720898, 2, 917534, 720898, 2, 983070, 720898, 2, 1048606, 720898, 2, 1114142, 720898, 2, 1179678, 720898, 2, 1245214, 720898, 3, 1245186, 589826, 3, 1245187, 589826, 3, 1245188, 589826, 3, 1245189, 589826, 3, 1245190, 589826, 3, 1245191, 589826, 3, 1245192, 589826, 3, 1245193, 589826, 3, 1245194, 589826, 3, 1245195, 589826, 3, 1245196, 589826, 3, 1245197, 589826, 3, 1245198, 589826, 3, 1245199, 589826, 3, 1245200, 589826, 3, 1245201, 589826, 3, 1245202, 589826, 3, 1245203, 589826, 3, 1245204, 589826, 3, 1245205, 589826, 3, 1245206, 589826, 3, 1245207, 589826, 3, 1245208, 589826, 3, 1245209, 589826, 3, 1245210, 589826, 3, 1245211, 589826, 3, 1245212, 589826, 3, 1245213, 589826, 3, 1245185, 524290, 3, 589825, 524290, 1, 655361, 524290, 1, 720897, 524290, 1, 786433, 524290, 1, 851969, 524290, 1, 917505, 524290, 1, 983041, 524290, 1, 1048577, 524290, 1, 1114113, 524290, 1, 1179649, 524290, 1)
layer_1/name = "Features"
layer_1/navigation_enabled = false
layer_1/tile_data = PackedInt32Array()
layer_2/name = "Crops"
layer_2/z_index = 1
layer_2/navigation_enabled = false
layer_2/tile_data = PackedInt32Array()
layer_3/name = "WorkStations"
layer_3/navigation_enabled = false
layer_3/tile_data = PackedInt32Array()

[node name="UIService" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0

[node name="Items" type="Label" parent="UIService"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 23.0

[node name="Player" type="CharacterBody2D" parent="."]
position = Vector2(208, 76)
script = ExtResource("2_mxh0d")
metadata/_edit_group_ = true

[node name="MapCollision" type="CollisionShape2D" parent="Player"]
position = Vector2(-0.25, 7)
shape = SubResource("RectangleShape2D_ec2i2")

[node name="Sprite" type="AnimatedSprite2D" parent="Player"]
sprite_frames = SubResource("SpriteFrames_fv0lg")
animation = &"new_animation"
autoplay = "new_animation"
frame_progress = 0.850157

[node name="InteractArea" type="Area2D" parent="Player"]
collision_layer = 2
collision_mask = 2

[node name="PickupCollideShape" type="CollisionShape2D" parent="Player/InteractArea"]
position = Vector2(-1, 1)
shape = SubResource("CircleShape2D_fulfv")

[node name="ItemSpawner" type="Node2D" parent="."]
position = Vector2(343, 117)
script = ExtResource("7_8m7wl")
ITEM = ExtResource("8_1gpcy")
spawn_delay = 1.5

[node name="SpawnTimer" type="Timer" parent="ItemSpawner"]
one_shot = true

[connection signal="add_item_update" from="FluidInventory" to="UIService" method="_rebuild_inventory_interface"]
[connection signal="timeout" from="ItemSpawner/SpawnTimer" to="ItemSpawner" method="_spawn_new_item"]
